# imports
import telebot
from telebot import types
import os
import random
import config  # –§–∞–π–ª —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (—Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ —Ç.–¥.)



# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
bot = telebot.TeleBot(config.TOKEN)

progress = 0

# handle /start
@bot.message_handler(commands=['start'])
def send_start(message):
    start_text = f"""
–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {message.from_user.first_name}!
–≠—Ç–æ—Ç –±–æ—Ç –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å –∫–∞–∂–¥–æ–º—É –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—å —Å–≤–æ–π –≤–∫–ª–∞–¥ –≤ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–µ–ø–ª–µ–Ω–∏—è –Ω–∞ –ø–ª–∞–Ω–µ—Ç–µ!
                """

    bot.send_message(message.chat.id, start_text)
    


@bot.message_handler(commands=['help'])
def send_help_message(message):
    help_text = """
< 0 0 >  –ù–µ–±–æ–ª—å—à–∞—è —Å–ø—Ä–∞–≤–∫–∞ –æ —Ä–∞–±–æ—Ç–µ —Å –±–æ—Ç–æ–º  < 0 0 >  
–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
/start - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º
/help - –ü–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É
/about - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
/task - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
/materials - –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
/done - –û—Ç–º–µ—Ç–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è
""" 
    bot.send_message(message.chat.id, help_text)


@bot.message_handler(commands=['task'])
def send_random_task(message):
    global today_task
    tasks_list = ['–°–µ–≥–æ–¥–Ω—è –ø–æ—Å—Ç–∞—Ä–∞–π—Å—è –≤—é–∫–ª—é—á–∞—Ç—å –∑–∞ —Å–æ–±–æ–π —Å–≤–µ—Ç, –∫–æ–≥–¥–∞ –≤—ã—Ö–æ–¥–∏—à—å –∏–∑ –∫–æ–º–Ω–∞—Ç—ã.', 
                '–°–µ–≥–æ–¥–Ω—è –ø–æ–ø—Ä–æ–±—É–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–Ω—å—à–µ –≤–æ–¥—ã, —á–µ–º —Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –¥–æ —ç—Ç–æ–≥–æ',
                '–£ –º–µ–Ω—è –¥–ª—è —Ç–µ–±—è —á–µ–ª–ª–µ–Ω–¥–∂! –í—ã–∫–ª—é—á–∏ –≤–æ–¥—É –ø–æ–∫–∞ —Ç—ã —á–∏—Å—Ç–∏—à—å –∑—É–±—ã!',
                '–°–µ–≥–æ–¥–Ω—è –ø—Ä–æ–±—É–π –≤—ã–∫–∏–¥—ã–≤–∞—Ç—å –º—É—Å–æ—Ä –≤ —É—Ä–Ω—É, –∞ –Ω–µ –±—Ä–æ—Å–∞—Ç—å –µ–≥–æ –Ω–∞ —É–ª–∏—Ü–µ!)',
                '–ë—É–¥–µ—Ç –∫—Ä—É—Ç–æ, –µ—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è —Ç—ã –≤—ã–±—Ä–æ—Å–∏—à—å –º—É—Å–æ—Ä –≤ —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä!',
                '–ü—Ä–æ–π–¥–∏—Å—å-–∫–∞ —Å–µ–≥–æ–¥–Ω—è –ø–µ—à–∫–æ–º, –Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ —Ç—ã –µ—â–µ —É—Å–ø–µ–µ—à—å –ø–æ–∫–∞—Ç–∞—Ç—å—Å—è!', 
                ]
    


    # –°–æ–∑–¥–∞–µ–º Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    markup = types.InlineKeyboardMarkup()
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Å —Ç–µ–∫—Å—Ç–æ–º
    button = types.InlineKeyboardButton("üëç–•–æ—Ä–æ—à–æ!", callback_data="button_clicked")
    markup.add(button)  # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    
    today_task = random.choice(tasks_list)
    bot.send_message(message.chat.id, "(:!–ó–ê–î–ê–ù–ò–ï –ù–ê –î–ï–ù–¨!:)\n\n" + today_task + "\n\n–ò–º–µ–Ω–Ω–æ —Ç–∞–∫ —Ç—ã –ø–æ–º–æ–∂–µ—à—å —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤—É —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–µ–ø–ª–µ–Ω–∏—è", reply_markup=markup)



@bot.message_handler(commands=['materials'])
def send_materials(message):
    pre_materials_text = "–ù–∏–∂–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –±—É–¥–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π –æ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –ø–æ—Ç–µ–ø–ª–µ–Ω–∏–∏! –£–≤–µ—Ä–µ–Ω, —á—Ç–æ —Ç—ã –Ω–µ –ø–æ–∂–∞–ª–µ–µ—à—å, –µ—Å–ª–∏ –æ–∑–Ω–∞–∫–æ–º–∏—à—å—Å—è!\n\n!Welcome!"
    materials_text = """
1. NASA ‚Äì Climate Change: Vital Signs of the Planet
üîó https://climate.nasa.gov/
üìå –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç NASA —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ –∫–ª–∏–º–∞—Ç–µ, –≥—Ä–∞—Ñ–∏–∫–∞–º–∏, —Å—Ç–∞—Ç—å—è–º–∏ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–∏—á–∏–Ω–∞—Ö –∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è—Ö –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–µ–ø–ª–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –æ –º–µ—Ä–∞—Ö –ø–æ –µ–≥–æ —Å–º—è–≥—á–µ–Ω–∏—é.

2. IPCC (–ú–µ–∂–ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–µ–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∞ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é –∫–ª–∏–º–∞—Ç–∞)
üîó https://www.ipcc.ch/
üìå –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç IPCC, –≥–¥–µ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –Ω–∞—É—á–Ω—ã–µ –¥–æ–∫–ª–∞–¥—ã –æ –∫–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö. –ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω—ã —Å–∞–º—ã–µ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø–æ —Ç–µ–º–µ, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–≥–Ω–æ–∑—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª–∏—Ç–∏–∫–æ–≤.

3. National Geographic ‚Äì Climate Change
üîó https://www.nationalgeographic.com/environment/topic/climate-change
üìå –°—Ç–∞—Ç—å–∏, —Ñ–æ—Ç–æ—Ä–µ–ø–æ—Ä—Ç–∞–∂–∏ –∏ –≤–∏–¥–µ–æ –æ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –ø–æ—Ç–µ–ø–ª–µ–Ω–∏–∏ –≤ –¥–æ—Å—Ç—É–ø–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ. National Geographic –æ–±—ä—è—Å–Ω—è–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª–∏–º–∞—Ç–∞.

4. NOAA Climate.gov
üîó https://www.climate.gov/
üìå –°–∞–π—Ç –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–∫–µ–∞–Ω–∏—á–µ—Å–∫–∏—Ö –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π (–°–®–ê) —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –∫–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç—Ä–µ–Ω–¥–∞—Ö, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏ –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏.

5. BBC Future ‚Äì Climate Change
üîó https://www.bbc.com/future/tags/climate-change
üìå –ü–æ–¥–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–µ–π –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –æ—Ç BBC –æ –∫–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö, –Ω–æ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö –∏ —Ä–µ—à–µ–Ω–∏—è—Ö —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º.

6. Carbon Brief
üîó https://www.carbonbrief.org/
üìå –°–∞–π—Ç —Å –≥–ª—É–±–æ–∫–∏–º –∞–Ω–∞–ª–∏–∑–æ–º –∫–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏, –Ω–∞—É—á–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –∏ –¥–µ–±–∞—Ç–æ–≤ –≤–æ–∫—Ä—É–≥ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–µ–ø–ª–µ–Ω–∏—è. –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É —ç–∫–æ–Ω–æ–º–∏–∫–æ–π –∏ —ç–∫–æ–ª–æ–≥–∏–µ–π.

7. WWF ‚Äì Climate Change
üîó https://www.worldwildlife.org/threats/effects-of-climate-change
üìå –í—Å–µ–º–∏—Ä–Ω—ã–π —Ñ–æ–Ω–¥ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥—ã —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ –≤–ª–∏—è–Ω–∏–∏ –ø–æ—Ç–µ–ø–ª–µ–Ω–∏—è –Ω–∞ –±–∏–æ—Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∏ –æ —Ç–æ–º, –∫–∞–∫ –º–æ–∂–Ω–æ —Å–Ω–∏–∑–∏—Ç—å –∞–Ω—Ç—Ä–æ–ø–æ–≥–µ–Ω–Ω–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ."""
    bot.send_message(message.chat.id, pre_materials_text)
    bot.send_message(message.chat.id, materials_text)


@bot.callback_query_handler(func=lambda call: True)
def handle_button_click(call):
    global today_task
    if call.data == "button_clicked":
        # –û—Ç–≤–µ—Ç–∏–º –≤ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ (alert)
        bot.answer_callback_query(call.id, "–£–¥–∞—á–∏!")
        

        # –ò–∑–º–µ–Ω–∏–º –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        bot.edit_message_text(
            chat_id=call.message.chat.id,
            message_id=call.message.message_id,
            text= today_task + "\n\n–£–≤–µ—Ä–µ–Ω, —á—Ç–æ —É —Ç–µ–±—è –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è!!!",
            reply_markup=None  # –£–±–∏—Ä–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è
        )



@bot.message_handler(commands=['done'])
def mark_done_task(message): 
    global progress
    progress += 1
    bot.send_message(message.chat.id, "–í–´ –≤—ã–ø–æ–ª–Ω–∏–ª–∏ –∑–∞–¥–∞–Ω–∏–µ! –í–´ –æ–≥—Ä–æ–º–Ω—ã–π –º–æ–ª–æ–¥–µ–π!\n –í—ã –ø—Ä–æ–¥–≤–∏–≥–∞–µ—Ç–µ—Å—å –≤ —Å–≤–æ–µ–π –ª–∏–Ω–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω–∞ —Ü–µ–ª—É—é –µ–¥–∏–Ω–∏—Ü—É!" +  "\n\n–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å: " + str(progress))




# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
if __name__ == '__main__':
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!")
    bot.infinity_polling()
